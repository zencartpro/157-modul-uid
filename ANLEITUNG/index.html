<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>UID 3.1.1 für Zen-Cart 1.5.7 deutsch</title>
<meta http-equiv="pragma" content="no-cache">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="content-language" content="de">
<meta name="description" content="Modul zur Integration der UID in die deutsche Zen-Cart Version 1.5.7">
<link rel="stylesheet" type="text/css" href="includes/css/stylesheet.css">  
<script type="text/javascript" src="includes/jscript/jscript_tabs.js"></script>
</head>
<body>
<div id="wrapper">
<div id="header">
<h1>UID 3.1.1 für Zen Cart 1.5.7 deutsch</h1>
</div>

<div id="slidetabsmenu" style="display: none;">
<ul>
  <li> <a onClick="expandcontent('sc1', this)" href="javascript:void(0)"><span>Sinn und Zweck</span></a></li>
  <li> <a onClick="expandcontent('sc2', this)" href="javascript:void(0)"><span>Neuinstallation</span></a></li>
  <li> <a onClick="expandcontent('sc7', this)" href="javascript:void(0)"><span>Update von 2.x</span></a></li>
   <li> <a onClick="expandcontent('sc4', this)" href="javascript:void(0)"><span>Deinstallation</span></a></li>
  <li> <a onClick="expandcontent('sc5', this)" href="javascript:void(0)"><span>Download</span></a></li>
  <li> <a onClick="expandcontent('sc6', this)" href="javascript:void(0)"><span>Unterstützen</span></a></li>
 </ul>
</div>
<br style="clear: both;">

<!--Begin tabcontainer-->
<div id="tabcontentcontainer">

<!--Begin sc1-->
<div class="tabcontent" id="sc1" style="display: block;">
<div class="textcontent">
<div class="regularlist">

<h2>Sinn und Zweck dieses Moduls</h2>

  <p>Dieses Modul erweitert die Kundendaten mit einem Feld für die UID für Firmenkunden innerhalb der EU.<br>
    Die UID wird bei der Registrierung und bei der Bearbeitung in der Administration online überprüft am System VIES<br>
    Firmen mit gültiger UID aus EU-Ländern außerhalb des Shoplandes werden dann im Shop bei einer Bestellung die Steuern sofort rückerstattet.
    <br>
    Der Status der Überprüfung ist bei jedem Kunden mit UID in der Shopadministration ersichtlich.<br>
    <br>
     Dieses Modul wurde gegenüber früheren Version komplett überarbeitet und verwendet als Codebasis nun das Modul Vat4Eu von lat9<br>
    Frühere Versionen haben die Steuerausweisung im UID-Fall komplett entfernt, diese Version tastet die Preise nicht an, sondern zieht die Steuer mit entsprechenden Hinweisen in Warenkorb, Checkout und Rechnung sofort wieder ab.<br>
    <br>
    In der Administration ist ersichtlich, ob die UID wirklich bei VIES geprüft wurde oder von einem Administrator ohne VIES Prüfung hinterlegt wurde.<br>
    Wurde die UID nicht erfolgreich geprüft, so dass sie eine Adminbestätigung erfordert, wird dem Kunden im Shop ein entsprechender Hinweis angezeigt und solange die UID nicht bestätigt wurde, erfolgt kein Abzug der Steuer.<br>
    <br>
    Auf der Rechnung und auch auf der pdf Rechnung erscheinen UID des Kunden und ein Hinweis auf die innergemeinschaftliche steuerfreie Lieferung in folgendem Format:<br>
    steuerfreie innergemeinschaftliche Lieferung | Unsere UID: ATU1234567 | Ihre UID: DE1234567    <br>
    <br>
    User von älteren Versionen dieses Moduls, die bereits UID Daten in den Kundendaten hinterlegt haben, können diese mit einem beiliegenden Konvertierungsscript in die neue Datenbankstruktur des Moduls übernehmen.<br>
    <br>
    Die neue Version des Moduls erfordert fast keine Änderungen in Corefiles mehr, alles was möglich ist, wird mit Observern gelöst, so dass die Installation äußerst einfach ist.<br>
    <br>
    Hinweis:<br>
    Die Überprüfung bei VIES wird via SOAP durchgeführt. Stellen Sie daher sicher, dass in Ihrer PHP Konfiguration die SOAP Extension aktiv ist.<br>
    Bevor Sie dieses Modul installieren prüfen Sie in Ihrer Zen Cart Administration unter Tools &gt; Serverinfo ob es einen Eintrag soap gibt mit Soap Client enabled.<br>
    Fehlt dieser Eintrag oder Soap Client ist disabled, aktvieren Sie die soap extension in Ihrer php.ini oder wenden Sie sich an Ihren Provider, falls Sie auf sokche Einstellungen keinen Zugriff haben.<br>
    Dieses Modul funktioniert nur mit Soap Client enabled!
    <br>
  </p>
<h3>Copyright, Changelog, Lizenz</h3>
<p>Anpassung des Moduls <a href="https://github.com/lat9/vat4eu" target="_blank">VAT Processing for European Countries (Vat4EU) </a> von lat9 für die deutsche Zen Cart Version 1.5.7<br>
  (c) 2022 <a href="https://www.webchills.at" target="_blank">webchills</a></p>
<p>Changelog Version 3.1.1:<br>
  2022-06-03 webchills
</p>
<p>Umstellung der Funktionalität auf die Codebasis von Vat4EU<br>
  Änderungen gegenüber des Originalmoduls:<br>
  * deutsche Übersetzung hinzugefügt<br>
  * Anpassung des Installers für die deutsche Zen Cart Version<br>
  * Verwendung der ohnehin in der deutschen Zen Cart Version vorhandenen EU Länderliste<br>
  * Zusatzeinstellung für eigene Shop UID<br>
  * Konfig &quot;VAT Refund for in-country purchases&quot; entfernt<br>
  * Ausgabe des Hinweistextes im Format <span id="vat-reverse-charge">steuerfreie innergemeinschaftliche Lieferung | Unsere UID: ATU1234567 | Ihre UID: DE1234567</span> <br>
  * Integration einer Konvertierungsmöglichkeit für die bereits vom früheren Modul hinterlegten UIDs<br>
  * Anleitung aktualisiert</p>
<p>This contribution is subject to version 3.0 of the GPL license available through the world-wide-web at the following url:<br>
  <a href="http://www.zen-cart-pro.at/license/3_0.txt">http://www.zen-cart-pro.at/license/3_0.txt</a></p>
</div>
</div>
</div>
<!--End sc1-->

<!--Begin sc2-->
<div class="tabcontent" id="sc2" style="display: block;">
<div class="textcontent">
<div class="regularlist">

<h2>Neuinstallation</h2>
<h3>Voraussetzungen</h3>
  <br>
  Dieses Modul ist<strong> nur für die deutsche Zen Cart 1.5.7 Version geeignet</strong></p>
und ändert einige Corefiles.<br>
<strong> Erst in einem Testshop einspielen und nicht direkt in Ihrem Liveshop!</strong><br>
<br><br/>
Für den Einbau dieses Moduls sollten Sie über folgende Werkzeuge verfügen:<br>
  <br>
  <strong>1) Ein guter Texteditor </strong><br>
  Damit ist nicht das in Windows enthaltene Notepad oder Microsoft Word gemeint.<br>
  Sie benötigen einen Texteditor, der utf-8 versteht und auch im Format utf-8 ohne BOM abspeichern kann.<br>
  Meine Empfehlung: <a href="http://www.ultraedit.com/loc/de/index_de.html" target="_blank">UltraEdit</a> (kostenlose 30 Tage Testversion verfügbar)<br>
  Ebenfalls gut geeignet ist der kostenlose Texteditor <a href="http://notepad-plus.sourceforge.net/de/site.htm" target="_blank">Notepad++ </a><br>

<p><strong>2) Ein Tool zum Vergleichen von Dateien</strong><br>
  Bei der Installation dieses Moduls ist es erforderlich, dass Sie den     Inhalt einiger Ihrer bestehenden Zen Cart Dateien mit dem Inhalt der     neuen Moduldateien vergleichen und die Änderungen zusammenführen     ("mergen").<br>
  Meine Empfehlung: <a href="http://www.scootersoftware.com/" target="_blank">BeyondCompare</a> (kostenlose 30 Tage Testversion verfügbar)<br>
  Ebenfalls gut geeignet ist das kostenlose Programm <a href="http://winmerge.org/" target="_blank">WinMerge </a></p>
<p><br>
  <strong>Empfehlung:</strong><br>
  <br>
  Dieses Modul erst in einem Testsystem einbauen und dort   konfigurieren/testen und endgültig an die eigenen Wünsche anpassen.        Erst dann in einem Liveshop einsetzen! Sichern Sie unbedingt alle   Dateien Ihres Shops per FTP und sichern Sie die Datenbank mit phpMyAdmin   oder anderen geeigneten Tools!</p>
<div id="warning"><b>WICHTIG</b><br>
Vor dem Einbau dieser Änderungen:<br>
BACKUP von Shop und Datenbank machen! <br>
Keine Haftung, Verwendung auf eigene Gefahr!<br>
BACKUP gemacht? Ok, dann weiterlesen...
</div>
<p>Die Installation erfolgt in folgenden Schritten. Halten Sie diesen Ablauf ein!</p>
<p>1.<br>
Im Ordner GEAENDERTE DATEIEN den Ordner includes/templates/DEINTEMPLATE auf das   im Shop verwendete Template umbennen (z.B.  responsive_classic).   <br>
Wenn Sie Zen Cart 1.5.7 gerade frisch installiert haben und noch   keinerlei Änderungen an den Dateien vorgenommen haben, können Sie nun  alle Dateien/Ordner aus dem Ordner GEAENDERTE DATEIEN in der   vorgegebenen Struktur in die Zen Cart Installation hochladen. Dabei   werden dann 4 Dateien überschrieben.<br>
Wenn Sie Zen Cart 1.5.7 schon länger im Einsatz haben und schon einmal   Änderungen an Dateien vorgenommen oder andere Module eingebaut haben,   dann laden Sie die Dateien keinesfalls einfach hoch. <br>
Vergleichen Sie alle Dateien im Ordner GEAENDERTE DATEIEN mit den   entsprechenden Dateien in Ihrem Shop und nehmen Sie die Änderungen   manuell per WinMerge oder BeyondCompare vor.<br>
Dann spielen Sie die geänderten Dateien in der gezeigten Struktur ein.</p>
<p>2. <br>
Im Ordner NEUE DATEIEN den   Ordner DEINADMIN auf den Namen Ihres admin Verzeichnisses   umbenennen.</p>
<p>3.<br>
In die Zen Cart Administration einloggen</p>
<p>4.<br>
Überprüfen Sie nun erst nochmal ob Sie wirklich in Schritt 2 den Ordner in NEUE DATEIEN entsprechend umbenannt haben.<br>
Ja?<br>
Dann nun alle Dateien/Ordner aus dem Ordner NEUE DATEIEN in der vorgegebenen Struktur in die Zen Cart Installation hochladen. <br>
Dabei werden keine bestehende Dateien überschrieben.</p>
<p>5.<br>
In der Zen Cart Administration auf irgendeinen Menüpunkt clicken. Sie sollten oben grüne Erfolgsmeldungen sehen und unter Konfiguration ist nun der neue Menüpunkt &quot;UID Einstellungen&quot; vorhanden. <br>
<br>
6.<br>
  In der Zen Cart Administration unter Konfiguration &gt; UID Einstellungen die gewünschten Einstellungen vornehmen. Alle Einstellungsmöglichkeiten sind dort erklärt.<br>
  <br>
  Tragen Sie dort auf jeden Fall Ihre eigene UID ein.<br>
  Entscheiden Sie, ob Sie das Modul im Modus Kunde oder Admin verwenden wollen.<br>
  <strong>Kunde</strong> bedeutet, dass die UID bei der Kundenregistrierung direkt bei VIES geprüft wird und wenn die Prüfung ok ist, dann erhält der Kunde die Sonderkondition sofort. Ist die Prüfung nicht erfolgreich, wird die UID in der Administration entsprechend gekennzeichnet und der Admin muss sie nochmals prüfen.<br>
  <strong>Admin</strong> bedeutet, dass jede vom Kunden selbst eingegebene UID immer erst den Status unverifiziert hat und solange kein Admin die UID nochmals verifiziert hat, keine Sonderkondition stattfindet. In diesem Fall erscheint im Shop für den Kunden durchgehend ein entsprechender Hinweis.</p>
<p>7.<br>
  Unter Module &gt; Zusammenfassung sind nun 2 neue Module vorhanden, die Sie beide aktivieren müssen:<br>
  Mehrwersteuererstattung (ot_vat_refund)<br>
  Hinweis auf innergemeinschaftliche Lieferung (ot_vat_reverse_charges)<br>
  Installieren Sie nun beide und beachten sie die Hinweise zur Sortierreihenfolge.
  <br>
  <br>
  Wenn Sie alles eingestellt haben, prüfen Sie noch unter Konfiguration &gt; Kundendetails, dass Sie Firma aktiviert haben, das ist eine Voraussetzung für dieses Modul.<br>
  <br>
  Un prüfen Sie Ihre Liste der EU-Staaten unter Konfiguration &gt; Mein Shop &gt; EU Länder<br>
  Das Modul greift auf diese Liste zu, es muss kommagetrennt die zweistelligen ISO Codes aller derzeitigen EU-Staaten enthalten:<br>
  BE,BG,DK,DE,EE,FI,FR,GR,IE,IT,LV,LT,LU,MT,NL,AT,PL,PT,RO,SE,SK,SI,ES,CZ,HU,CY,HR  <br>
<br>
  Und dann können Sie UID - Funktionalität im Frontend aktivieren auf true stellen.<br>
  <br>
  Gehen Sie nun mit einem Testkunden mit UID zur Kasse und prüfen die Funktionalität.
  <br>
</p>
</div>
</div>
</div>

<!--End sc2-->

<!--Begin sc7-->
<div class="tabcontent" id="sc7" style="display: block;">
<div class="textcontent">
<div class="regularlist">

<h2>UPDATE VON ÄLTEREN VERSIONEN DIESES MODULS</h2>
<p>
 Falls Sie dieses Modul in Version 2.7.3 und älter bereits in Ihrem Zen Cart 1.5.6 Shop verwendet haben und nun auf Zen Cart 1.5.7 aktualisiert haben, dann können Sie ihre bereits hinterlegten UIDs weiterverwenden, indem Sie sie in die neue Datenbankstruktur übernehmen</p>
<p>Eine Anleitung dazu finden Sie in der Datei anleitung.txt im Ordner UID DATENUEBERNAHME AUS ALTEM MODUL.</p>
<p><strong>WICHTIG:<br/>Bevor Sie diese Konvertierung durchführen installieren Sie zunächst ganz normal wie unter Neuinstallation beschrieben das Modul UID 3.1.1 für Zen Cart 1.5.7 deutsch in Ihrem bereits auf 1.5.7 aktualisierten Shop!</strong></p>
<p>Sie haben also bereits einen funktionierenden auf 1.5.7 aktualisierten Shop mit dem neuen UID Modul 3.1.1. Nur unter Kunden > Kunden sind keinerlei bestehende UIDs vorhanden.</p>
<p>Und die übernehmen Sie nun wie in der anleitung.txt beschrieben.</p>
<p>Prüfen Sie auch, ob in Ihrer Shopinstallation noch irgendwo Relikte des alten Moduls sind, folgende Dateien sollten keinesfalls mehr vorhanden sein, falls sie vorhanden sind vom Server löschen:<br>
  <br>
  DEINADMIN/includes/auto_loaders/config.uid.php<br>
  DEINADMIN/includes/functions/extra_functions/functions_vatmod.php <br>
  DEINADMIN/includes/init_includes/init_uid.php<br>
  DEINADMIN/includes/installers/uid (gesamter Ordner)<br>
DEINADMIN/includes/languages/german/extra_definitions/products_uid.php <br>
DEINADMIN/includes/languages/german/extra_definitions/uid.php<br>
DEINADMIN/includes/languages/english/extra_definitions/products_uid.php <br>
DEINADMIN/includes/languages/english/extra_definitions/uid.php<br>
includes/functions/extra_functions/functions_vatmod.php<br>
includes/languages/german/extra_definitions/uid.php<br>
includes/languages/german/extra_definitions/vatmod.php<br>
includes/languages/english/extra_definitions/uid.php<br>
includes/languages/english/extra_definitions/vatmod.php<br>
<br>
Beachten Sie bitte auch, dass das neue Modul lediglich Änderungen in 4 bestehenden Dateien vornimmt:<br>
includes/classes/class.rl_invoice3.php<br>
includes/templates/DEINTEMPLATE/templates/tpl_modules_address_book_details.php<br>
includes/templates/DEINTEMPLATE/templates/tpl_modules_checkout_new_address.php<br>
includes/templates/DEINTEMPLATE/templates/tpl_modules_create_account.php<br>
<br>
Das alte Modul hat sehr viele Dateien geändert, diese alten Dateiänderungen dürfen in Ihrem 1.5.7 Shop keinesfalls mehr vorhanden sein!
<br>
Wenn Sie sich unsicher sind, laden Sie sich die alte Version 2.7.3 des UID Moduls für 1.5.6 herunter, dort finden Sie nochmal ausführlich beschrieben, welche Dateien dieses Modul früher mal geändert hat und wie diese Änderungen ausgesehen haben.<br>
Download des alten Moduls:
<br>
<a href="https://www.zen-cart-pro.at/knowledgebase/uid-fuer-zen-cart-1-5-6-deutsch/" target="_blank">https://www.zen-cart-pro.at/knowledgebase/uid-fuer-zen-cart-1-5-6-deutsch/</a><br>
<br>
 Folgende Befehle sollten Sie nun noch unter Tools &gt; SQL Patches installieren absenden, um die alten Datenbankkonfigurationseinträge des alten Moduls noch zu entfernen:<br>
<br>
DELETE FROM configuration WHERE configuration_key = 'ENTRY_TVA_INTRACOM_CHECK';<br>
DELETE FROM configuration WHERE configuration_key = 'TVA_SHOP_INTRACOM';<br>
DELETE FROM configuration WHERE configuration_key = 'UID_MODUL_VERSION';<br>
DELETE FROM configuration WHERE configuration_key = 'ENTRY_TVA_INTRACOM_MIN_LENGTH';<br>
DELETE FROM configuration_language WHERE configuration_key = 'ENTRY_TVA_INTRACOM_CHECK';<br>
DELETE FROM configuration_language WHERE configuration_key = 'TVA_SHOP_INTRACOM';<br>
DELETE FROM configuration_language WHERE configuration_key = 'ENTRY_TVA_INTRACOM_MIN_LENGTH';<br>
DELETE FROM configuration_group WHERE configuration_group_title LIKE 'UID';<br>
DELETE FROM admin_pages WHERE page_key='configProdUID'; </p>
<p><br>
</p>
</div>
</div>
</div>
<!--End sc7-->

<!--Begin sc4-->
<div class="tabcontent" id="sc4" style="display: block;">
<div class="textcontent">
<div class="regularlist">

<h2>DEINSTALLATION</h2>
<p>
 Um das Modul vollständig zu entfernen, gehen Sie bitte wie folgt vor:
</p>
<p>1)<br>
  Alle von diesem Modul neu angelegten Dateien vom Server entfernen.</p>
<p>2)<br>
  Alle von diesem Modul geänderte Dateien wieder mit den 1.5.7 Originaldateien bzw. den Dateien Ihres zuvor angelegten Backups ersetzen.</p>
<p>3)<br>
  Die uninstall.sql im Ordner UNINSTALL mit einem Texteditor öffnen und den Inhalt kopieren.
  <br>
  Zen Cart Administration öffnen und unter Tools &gt; SQL Patches installieren den Inhalt ins Feld hineinkopieren und absenden.</p>



</div>
</div>
</div>
<!--End sc4-->

<!--Begin sc5-->
<div class="tabcontent" id="sc5" style="display: block;">
<div class="textcontent">
<div class="regularlist">
<h2>Download</h2>
<p>Dieses Modul steht kostenlos auf Github zum Download bereit:</p>
<p>Freigegebene getestete Versionen für den Einsatz in Livesystemen ausschließlich auf Github unter Releases herunterladen:<br/>
  <a href="https://github.com/zencartpro/157-modul-uid/releases" target="_blank"><b>https://github.com/zencartpro/157-modul-uid/releases</b></a></p>

</div>
</div>
</div>
<!--End sc5-->

<!--Begin sc6-->
<div class="tabcontent" id="sc6" style="display: block;">
<div class="textcontent">
<div class="regularlist">

<h2>Unterstützen</h2>
<p>Sie finden dieses Modul nützlich?</p>
<p>Die deutsche Zen-Cart Version steht kostenlos zur Verfügung. Ebenso dieses Modul.<br/>
Um unsere laufenden Kosten (Server, Lizenzgebühren, usw.) abzudecken freuen wir uns über jede Unterstützung.<br/>
Auch für die Zeit, die für die Weiterentwicklung neuer Versionen aufgewendet wird.</p>
<p><a href="https://donorbox.org/spende-fur-die-weiterentwicklung-der-deutschen-zen-cart-version" target="_blank"><img src="https://www.zen-cart-pro.at/zencartpro-donation-white.png" alt="Spende für die Weiterentwicklung der deutschen Zen Cart Version" title="Spende für die Weiterentwicklung der deutschen Zen Cart Version"></a></p>

<br/><br/>
<p>Du bist Entwickler und willst helfen, die deutsche Zen Cart Version noch besser zu machen?<br>
  Beteilige Dich auf Github:<br>
  <a href="https://github.com/zencartpro" target="_blank"><strong>https://github.com/zencartpro</strong></a></p>
<br/><br/>
</div>
</div>
</div>
<!--End sc6-->
</div>
<div id="footer">
Ein Modul von <a href="https://www.zen-cart-pro.at" target="_blank">www.zen-cart-pro.at</a> - Die deutsche Zen Cart Version
</div>
</div>
<!--end tabcontainer-->
<script type="text/javascript">document.getElementById('sc1').style.display = 'none';</script>
<script type="text/javascript">document.getElementById('sc2').style.display = 'none';</script>
<script type="text/javascript">document.getElementById('sc4').style.display = 'none';</script>
<script type="text/javascript">document.getElementById('sc5').style.display = 'none';</script>
<script type="text/javascript">document.getElementById('sc6').style.display = 'none';</script>
<script type="text/javascript">ShowTabs()</script>
<script type="text/javascript">
// We only show the tab links if JavaScript is available/active.
<!--
if (document.getElementById("slidetabsmenu") != null) {
  document.getElementById('slidetabsmenu').style.display = "block";
}
//-->
</script>

</body></html>